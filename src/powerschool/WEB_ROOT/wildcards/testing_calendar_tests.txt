~[tlist_sql;
SELECT COALESCE(
		JSON_ARRAYAGG(
			JSON_OBJECT(* RETURNING CLOB) ORDER BY start_date, name
		RETURNING CLOB)
	, TO_CLOB(CHR(91) || CHR(93)) ) json_obj
	
FROM (
SELECT U_TE_TESTING_CALENDAR.name
	, TO_CHAR( U_TE_TESTING_CALENDAR.START_DATE, 'YYYY-MM-DD' ) START_DATE
	, U_TE_TESTING_CALENDAR.NOTES
	, U_TE_TESTING_CALENDAR.TEST_LEVEL

FROM U_TE_TESTING_CALENDAR
	INNER JOIN terms ON U_TE_TESTING_CALENDAR.START_DATE BETWEEN terms.FIRSTDAY AND terms.LASTDAY
		AND terms.SCHOOLID = ~(curschoolid)
		AND terms.id LIKE '~(curyearid)%'
		AND terms.ABBREVIATION LIKE '%-%'
WHERE U_TE_TESTING_CALENDAR.active = 1
)foo
]~(json_obj)[/tlist_sql]